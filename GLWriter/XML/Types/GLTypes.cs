using GLWriter.CSharp;

namespace GLWriter.XML.Types
{
    public enum GLTypes
    {
        None,
        Enum,
        Boolean,
        Bitfield,
        Void,
        Byte,
        UByte,
        Short,
        UShort,
        Int,
        UInt,
        ClampX,
        Sizei,
        Float,
        ClampF,
        Double,
        ClampD,
        EGLClientBufferEXT,
        EGLImageOES,
        Char,
        CharARB,
        HandleARB,
        Half,
        HalfARB,
        Fixed,
        IntPtr,
        IntPtrARB,
        SizeiPtr,
        SizeiPtrARB,
        Int64,
        Int64EXT,
        UInt64,
        UInt64EXT,
        Sync,
        ContextStruct,
        EventStruct,
        DebugProc,
        DebugProcARB,
        DebugProcKHR,
        DebugProcAMD,
        HalfNV,
        VDPauSurfaceNV,
        VulkanProcNV
    }

    public static class GLTypeExtensions
    {
        public static CSharpType ToCSharpType(this GLTypes glType) => glType switch
        {
            GLTypes.Enum => new CSharpType(DataTypes.Enum),
            GLTypes.Boolean => new CSharpType(DataTypes.Bool),
            GLTypes.Bitfield => new CSharpType(DataTypes.UInt),
            GLTypes.Void => new CSharpType(DataTypes.Void),
            GLTypes.Byte => new CSharpType(DataTypes.Byte),
            GLTypes.UByte => new CSharpType(DataTypes.Byte),
            GLTypes.Short => new CSharpType(DataTypes.Short),
            GLTypes.UShort => new CSharpType(DataTypes.UShort),
            GLTypes.Int => new CSharpType(DataTypes.Int),
            GLTypes.UInt => new CSharpType(DataTypes.UInt),
            GLTypes.ClampX => new CSharpType(DataTypes.Int),
            GLTypes.Sizei => new CSharpType(DataTypes.Int),
            GLTypes.Float => new CSharpType(DataTypes.Float),
            GLTypes.ClampF => new CSharpType(DataTypes.Float),
            GLTypes.Double => new CSharpType(DataTypes.Double),
            GLTypes.ClampD => new CSharpType(DataTypes.Double),
            GLTypes.EGLClientBufferEXT => new CSharpType(DataTypes.Void, TypeModifiers.Pointer),
            GLTypes.EGLImageOES => new CSharpType(DataTypes.Void, TypeModifiers.Pointer),
            GLTypes.Char => new CSharpType(DataTypes.Char),
            GLTypes.CharARB => new CSharpType(DataTypes.Char),
            GLTypes.HandleARB =>
#if OSX
            new CSharpType(DataTypes.Void, TypeModifiers.Pointer),
#else
            new CSharpType(DataTypes.UInt),
#endif
            GLTypes.Half => new CSharpType(DataTypes.UShort),
            GLTypes.HalfARB => new CSharpType(DataTypes.UShort),
            GLTypes.Fixed => new CSharpType(DataTypes.Int),
            GLTypes.IntPtr => new CSharpType(DataTypes.IntPtr),
            GLTypes.IntPtrARB => new CSharpType(DataTypes.IntPtr),
            GLTypes.SizeiPtr => new CSharpType(DataTypes.IntPtr),
            GLTypes.SizeiPtrARB => new CSharpType(DataTypes.IntPtr),
            GLTypes.Int64 => new CSharpType(DataTypes.Long),
            GLTypes.Int64EXT => new CSharpType(DataTypes.Long),
            GLTypes.UInt64 => new CSharpType(DataTypes.ULong),
            GLTypes.UInt64EXT => new CSharpType(DataTypes.ULong),
            GLTypes.Sync => new CSharpType(DataTypes.Struct, TypeModifiers.Pointer),
            GLTypes.ContextStruct => new CSharpType(DataTypes.Struct),
            GLTypes.EventStruct => new CSharpType(DataTypes.Struct),
            GLTypes.DebugProc => new CSharpType(DataTypes.Void, TypeModifiers.Pointer),
            GLTypes.DebugProcARB => new CSharpType(DataTypes.Void, TypeModifiers.Pointer),
            GLTypes.DebugProcKHR => new CSharpType(DataTypes.Void, TypeModifiers.Pointer),
            GLTypes.DebugProcAMD => new CSharpType(DataTypes.Void, TypeModifiers.Pointer),
            GLTypes.HalfNV => new CSharpType(DataTypes.UShort),
            GLTypes.VDPauSurfaceNV => new CSharpType(DataTypes.IntPtr),
            GLTypes.VulkanProcNV => new CSharpType(DataTypes.Void, TypeModifiers.Pointer),
            _ => new CSharpType(DataTypes.None)
        };

        public static GLTypes ParseGLType(string text) => text switch
        {
            "GLenum" => GLTypes.Enum,
            "GLboolean" => GLTypes.Boolean,
            "GLbitfield" => GLTypes.Bitfield,
            "GLvoid" => GLTypes.Void,
            "GLbyte" => GLTypes.Byte,
            "GLubyte" => GLTypes.UByte,
            "GLshort" => GLTypes.Short,
            "GLushort" => GLTypes.UShort,
            "GLint" => GLTypes.Int,
            "GLuint" => GLTypes.UInt,
            "GLclampx" => GLTypes.ClampX,
            "GLsizei" => GLTypes.Sizei,
            "GLfloat" => GLTypes.Float,
            "GLclampf" => GLTypes.ClampF,
            "GLdouble" => GLTypes.Double,
            "GLclampd" => GLTypes.ClampD,
            "GLeglClientBufferEXT" => GLTypes.EGLClientBufferEXT,
            "GLeglImageOES" => GLTypes.EGLImageOES,
            "GLchar" => GLTypes.Char,
            "GLcharARB" => GLTypes.CharARB,
            "GLhandleARB" => GLTypes.HandleARB,
            "GLhalf" => GLTypes.Half,
            "GLhalfARB" => GLTypes.HalfARB,
            "GLfixed" => GLTypes.Fixed,
            "GLintptr" => GLTypes.IntPtr,
            "GLintptrARB" => GLTypes.IntPtrARB,
            "GLsizeiptr" => GLTypes.SizeiPtr,
            "GLsizeiptrARB" => GLTypes.SizeiPtrARB,
            "GLint64" => GLTypes.Int64,
            "GLint64EXT" => GLTypes.Int64EXT,
            "GLuint64" => GLTypes.UInt64,
            "GLuint64EXT" => GLTypes.UInt64EXT,
            "GLsync" => GLTypes.Sync,
            "struct _cl_context" => GLTypes.ContextStruct,
            "struct _cl_event" => GLTypes.EventStruct,
            "GLDEBUGPROC" => GLTypes.DebugProc,
            "GLDEBUGPROCARB" => GLTypes.DebugProcAMD,
            "GLDEBUGPROCKHR" => GLTypes.DebugProcKHR,
            "GLDEBUGPROCAMD" => GLTypes.DebugProcAMD,
            "GLhalfNV" => GLTypes.HalfNV,
            "GLvdpauSurfaceNV" => GLTypes.VDPauSurfaceNV,
            "GLVULKANPROCNV" => GLTypes.VulkanProcNV,
            _ => GLTypes.None
        };
    }
}
